{"ts":1366157261391,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"state       = require './state'\neventCodes  = require './event-codes'\n\ndevices = {}\n\nmodule.exports = (reading, collection) ->\n\n  console.log \"devices: \", devices.length\n\n  #device        = devices[reading.mobileId] ?= {}\n  unless devices[reading.mobileId]\n    devices[reading.mobileId] = {}\n  \n  device = devices[reading.mobileId] \n  \n  prevState     = device.state\n  newState      = state(reading.eventCode)\n  stateChanged  = prevState is not newState\n  \n  if newState is 'info'\n    return\n  else\n    device.state = newState\n  \n  if stateChanged\n    switch newState\n      when 'engine_on'\n        console.log \"device.tripStartAt = #{reading.updateTime}\"\n        device.tripStartAt = reading.updateTime\n      when 'engine_off'\n        console.log \"engine_off\"\n        collection.aggregate\n          $match:\n            mobileId: reading.mobileId\n            updateTime:\n              $gt: device.tripStartAt\n          $group:\n            _id: \"$eventCode\"\n            num:\n              $sum: 1\n        , (err, results) ->\n          historical_trip =\n            start_at  : device.tripStartAt\n            device_id : reading.mobileId\n            \n          results.forEach (result) ->\n            console.log \"#{eventCodes[result.id]}_num = \", result.num\n            historical_trip[\"#{eventCodes[result.id]}_num\"] = result.num\n          \n          \n          console.log historical_trip"]],"start1":0,"start2":0,"length1":0,"length2":1389}]],"length":1389}
{"ts":1366162398603,"patch":[[{"diffs":[[0,"\n  \n"],[-1,"  if newState is 'info'\n    return\n  else\n  "],[0,"  de"]],"start1":453,"start2":453,"length1":52,"length2":8},{"diffs":[[0,"    "],[-1,"switch"],[1,"if"],[0," new"]],"start1":504,"start2":504,"length1":14,"length2":10},{"diffs":[[0,"newState"],[-1,"\n      when"],[1," is"],[0," 'engine"]],"start1":511,"start2":511,"length1":27,"length2":19},{"diffs":[[0,"ine_on'\n"],[-1,"  "],[0,"      co"]],"start1":527,"start2":527,"length1":18,"length2":16},{"diffs":[[0,"ime}\"\n      "],[-1,"  "],[0,"device.tripS"]],"start1":592,"start2":592,"length1":26,"length2":24},{"diffs":[[0,"    "],[-1,"  when"],[1,"if newState is"],[0," 'en"]],"start1":644,"start2":644,"length1":14,"length2":22},{"diffs":[[0,"_off'\n      "],[-1," "],[-1," "],[0,"console.log "]],"start1":670,"start2":670,"length1":26,"length2":24},{"diffs":[[0,"\"\n      "],[-1,"  "],[0,"collecti"]],"start1":705,"start2":705,"length1":18,"length2":16},{"diffs":[[0,"    "],[-1," "],[-1," "],[0,"$match:\n"],[-1,"  "],[0,"    "]],"start1":738,"start2":738,"length1":20,"length2":16},{"diffs":[[0,"        "],[-1,"  "],[0,"updateTi"]],"start1":789,"start2":789,"length1":18,"length2":16},{"diffs":[[0,"teTime:\n"],[-1,"  "],[0,"        "]],"start1":801,"start2":801,"length1":18,"length2":16},{"diffs":[[0,"    "],[-1,"  "],[0,"$group:\n"],[-1,"  "],[0,"    "]],"start1":849,"start2":849,"length1":20,"length2":16},{"diffs":[[0,"    "],[-1,"  "],[0,"num:\n"],[-1,"  "],[0,"    "]],"start1":895,"start2":895,"length1":17,"length2":13},{"diffs":[[0,"1\n      "],[-1,"  "],[0,", (err, "]],"start1":922,"start2":922,"length1":18,"length2":16},{"diffs":[[0,"results) ->\n"],[-1,"  "],[0,"        hist"]],"start1":938,"start2":938,"length1":26,"length2":24},{"diffs":[[0,"        "],[-1,"  "],[0,"start_at"]],"start1":978,"start2":978,"length1":18,"length2":16},{"diffs":[[0,"t\n          "],[-1," "],[-1," "],[0,"device_id : "]],"start1":1015,"start2":1015,"length1":26,"length2":24},{"diffs":[[0,"        "],[-1,"  \n "],[1,"\n"],[0,"        "],[-1," "],[0,"results."]],"start1":1058,"start2":1058,"length1":29,"length2":25},{"diffs":[[0,"(result) ->\n"],[-1,"  "],[0,"          co"]],"start1":1091,"start2":1091,"length1":26,"length2":24},{"diffs":[[0,"m\n          "],[-1," "],[-1," "],[0,"historical_t"]],"start1":1169,"start2":1169,"length1":26,"length2":24},{"diffs":[[0,"ult.num\n        "],[-1,"  \n  "],[1,"\n"],[0,"        \n       "]],"start1":1234,"start2":1234,"length1":37,"length2":33},{"diffs":[[0,"  \n        \n"],[-1,"  "],[0,"        cons"]],"start1":1248,"start2":1248,"length1":26,"length2":24}]],"length":1295,"saved":false}
{"ts":1366162581119,"patch":[[{"diffs":[[0,"bileId]\n    "],[1,"#"],[0,"devices[read"]],"start1":249,"start2":249,"length1":24,"length2":25},{"diffs":[[0," = {}\n  "],[1,"#"],[0,"\n  "],[1,"#"],[0,"device ="]],"start1":287,"start2":287,"length1":19,"length2":21},{"diffs":[[0,"eId] \n  "],[1,"#"],[0,"\n  "],[1,"#"],[0,"prevStat"]],"start1":330,"start2":330,"length1":19,"length2":21},{"diffs":[[0,"state\n  "],[1,"#"],[0,"newState"]],"start1":366,"start2":366,"length1":16,"length2":17},{"diffs":[[0,"Code)\n  "],[1,"#"],[0,"stateCha"]],"start1":410,"start2":410,"length1":16,"length2":17},{"diffs":[[0,"State\n  "],[1,"#"],[0,"\n  "],[1,"#"],[0,"device.s"]],"start1":455,"start2":455,"length1":19,"length2":21},{"diffs":[[0,"State\n  "],[1,"#"],[0,"\n  "],[1,"#"],[0,"if state"]],"start1":486,"start2":486,"length1":19,"length2":21},{"diffs":[[0,"Changed\n    "],[1,"#"],[0,"if newState "]],"start1":507,"start2":507,"length1":24,"length2":25},{"diffs":[[0,"ngine_on'\n      "],[1,"#"],[0,"console.log \"dev"]],"start1":537,"start2":537,"length1":32,"length2":33},{"diffs":[[0,"ime}\"\n      "],[1,"#"],[0,"device.tripS"]],"start1":605,"start2":605,"length1":24,"length2":25},{"diffs":[[0,"ime\n    "],[1,"#"],[0,"if newSt"]],"start1":654,"start2":654,"length1":16,"length2":17},{"diffs":[[0,"_off'\n      "],[1,"#"],[0,"console.log "]],"start1":685,"start2":685,"length1":24,"length2":25},{"diffs":[[0,"\"\n      "],[1,"#"],[0,"collecti"]],"start1":721,"start2":721,"length1":16,"length2":17},{"diffs":[[0,"        "],[1,"#"],[0,"$match:\n"]],"start1":751,"start2":751,"length1":16,"length2":17},{"diffs":[[0,"        "],[1,"#"],[0,"mobileId"]],"start1":770,"start2":770,"length1":16,"length2":17},{"diffs":[[0,"        "],[1,"#"],[0,"updateTi"]],"start1":808,"start2":808,"length1":16,"length2":17},{"diffs":[[0,"        "],[1,"#"],[0,"$gt: dev"]],"start1":833,"start2":833,"length1":16,"length2":17},{"diffs":[[0,"        "],[1,"#"],[0,"$group:\n"]],"start1":866,"start2":866,"length1":16,"length2":17},{"diffs":[[0,"        "],[1,"#"],[0,"_id: \"$e"]],"start1":885,"start2":885,"length1":16,"length2":17},{"diffs":[[0,"        "],[1,"#"],[0,"num:\n   "]],"start1":914,"start2":914,"length1":16,"length2":17},{"diffs":[[0,"        "],[1,"#"],[0,"$sum: 1\n"]],"start1":932,"start2":932,"length1":16,"length2":17},{"diffs":[[0,"1\n      "],[1,"#"],[0,", (err, "]],"start1":947,"start2":947,"length1":16,"length2":17},{"diffs":[[0,"lts) ->\n        "],[1,"#"],[0,"historical_trip "]],"start1":968,"start2":968,"length1":32,"length2":33},{"diffs":[[0,"        "],[1,"#"],[0,"start_at"]],"start1":1005,"start2":1005,"length1":16,"length2":17},{"diffs":[[0,"        "],[1,"#"],[0,"device_i"]],"start1":1047,"start2":1047,"length1":16,"length2":17},{"diffs":[[0,"ileId\n          "],[1,"#"],[0,"\n        results"]],"start1":1079,"start2":1079,"length1":32,"length2":33},{"diffs":[[0,"        "],[1,"#"],[0,"results."]],"start1":1097,"start2":1097,"length1":16,"length2":17},{"diffs":[[0,"t) ->\n          "],[1,"#"],[0,"console.log \"#{e"]],"start1":1128,"start2":1128,"length1":32,"length2":33},{"diffs":[[0,"        "],[1,"#"],[0,"historic"]],"start1":1205,"start2":1205,"length1":16,"length2":17},{"diffs":[[0,"ult.num\n        "],[1,"#"],[0,"\n        \n      "]],"start1":1267,"start2":1267,"length1":32,"length2":33},{"diffs":[[0,"        "],[1,"#"],[0,"\n       "]],"start1":1285,"start2":1285,"length1":16,"length2":17},{"diffs":[[0,"        "],[1,"#"],[0,"console."]],"start1":1295,"start2":1295,"length1":16,"length2":17}]],"length":1331,"saved":false}
{"ts":1366162665623,"patch":[[{"diffs":[[0,"bileId]\n    "],[-1,"#"],[0,"devices[read"]],"start1":249,"start2":249,"length1":25,"length2":24}]],"length":1330,"saved":false}
{"ts":1366162685581,"patch":[[{"diffs":[[0,"ices"],[-1,".length"],[0,"\n\n  "]],"start1":158,"start2":158,"length1":15,"length2":8}]],"length":1323,"saved":false}
{"ts":1366162730815,"patch":[[{"diffs":[[0,"ices\n\n  "],[-1,"#"],[0,"device  "]],"start1":158,"start2":158,"length1":17,"length2":16},{"diffs":[[0,"?= {}\n  "],[1,"#"],[0,"unless d"]],"start1":208,"start2":208,"length1":16,"length2":17},{"diffs":[[0,"Id]\n    "],[1,"#"],[0,"devices["]],"start1":246,"start2":246,"length1":16,"length2":17}]],"length":1324,"saved":false}
{"ts":1366162790260,"patch":[[{"diffs":[[0,"}\n  "],[-1,"#unless devices[reading.mobileId]\n    #devices[reading.mobileId] = {}\n  #\n  #"],[0,"devi"]],"start1":212,"start2":212,"length1":85,"length2":8},{"diffs":[[0,"eId] \n  "],[-1,"#"],[0,"\n  "],[-1,"#"],[0,"prevStat"]],"start1":246,"start2":246,"length1":21,"length2":19},{"diffs":[[0,"state\n  "],[-1,"#"],[0,"newState"]],"start1":280,"start2":280,"length1":17,"length2":16},{"diffs":[[0,"Code)\n  "],[-1,"#"],[0,"stateCha"]],"start1":323,"start2":323,"length1":17,"length2":16},{"diffs":[[0,"State\n  "],[-1,"#"],[0,"\n  "],[-1,"#"],[0,"device.s"]],"start1":367,"start2":367,"length1":21,"length2":19},{"diffs":[[0,"e\n  "],[-1,"#"],[0,"\n  "],[-1,"#"],[0,"if s"]],"start1":400,"start2":400,"length1":13,"length2":11},{"diffs":[[0,"Changed\n    "],[-1,"#"],[0,"if newState "]],"start1":415,"start2":415,"length1":25,"length2":24},{"diffs":[[0,"ngine_on'\n      "],[-1,"#"],[0,"console.log \"dev"]],"start1":444,"start2":444,"length1":33,"length2":32},{"diffs":[[0,"ime}\"\n      "],[-1,"#"],[0,"device.tripS"]],"start1":511,"start2":511,"length1":25,"length2":24},{"diffs":[[0,"ime\n    "],[-1,"#"],[0,"if newSt"]],"start1":559,"start2":559,"length1":17,"length2":16},{"diffs":[[0,"_off'\n      "],[-1,"#"],[0,"console.log "]],"start1":589,"start2":589,"length1":25,"length2":24},{"diffs":[[0,"\"\n      "],[-1,"#"],[0,"collecti"]],"start1":624,"start2":624,"length1":17,"length2":16},{"diffs":[[0,"        "],[-1,"#"],[0,"$match:\n"]],"start1":653,"start2":653,"length1":17,"length2":16},{"diffs":[[0,"        "],[-1,"#"],[0,"mobileId"]],"start1":671,"start2":671,"length1":17,"length2":16},{"diffs":[[0,"        "],[-1,"#"],[0,"updateTi"]],"start1":708,"start2":708,"length1":17,"length2":16},{"diffs":[[0,"        "],[-1,"#"],[0,"$gt: dev"]],"start1":732,"start2":732,"length1":17,"length2":16},{"diffs":[[0,"        "],[-1,"#"],[0,"$group:\n"]],"start1":764,"start2":764,"length1":17,"length2":16},{"diffs":[[0,"        "],[-1,"#"],[0,"_id: \"$e"]],"start1":782,"start2":782,"length1":17,"length2":16},{"diffs":[[0,"        "],[-1,"#"],[0,"num:\n   "]],"start1":810,"start2":810,"length1":17,"length2":16},{"diffs":[[0,"        "],[-1,"#"],[0,"$sum: 1\n"]],"start1":827,"start2":827,"length1":17,"length2":16},{"diffs":[[0,"1\n      "],[-1,"#"],[0,", (err, "]],"start1":841,"start2":841,"length1":17,"length2":16},{"diffs":[[0,"lts) ->\n        "],[-1,"#"],[0,"historical_trip "]],"start1":861,"start2":861,"length1":33,"length2":32},{"diffs":[[0,"        "],[-1,"#"],[0,"start_at"]],"start1":897,"start2":897,"length1":17,"length2":16},{"diffs":[[0,"        "],[-1,"#"],[0,"device_i"]],"start1":938,"start2":938,"length1":17,"length2":16},{"diffs":[[0,"ileId\n          "],[-1,"#"],[0,"\n        #result"]],"start1":969,"start2":969,"length1":33,"length2":32},{"diffs":[[0,"        "],[-1,"#"],[0,"results."]],"start1":986,"start2":986,"length1":17,"length2":16},{"diffs":[[0,"t) ->\n          "],[-1,"#"],[0,"console.log \"#{e"]],"start1":1016,"start2":1016,"length1":33,"length2":32},{"diffs":[[0,"        "],[-1,"#"],[0,"historic"]],"start1":1092,"start2":1092,"length1":17,"length2":16},{"diffs":[[0,"ult.num\n        "],[-1,"#"],[0,"\n        #\n     "]],"start1":1153,"start2":1153,"length1":33,"length2":32},{"diffs":[[0,"        "],[-1,"#"],[0,"\n       "]],"start1":1170,"start2":1170,"length1":17,"length2":16},{"diffs":[[0,"        "],[-1,"#"],[0,"console."]],"start1":1179,"start2":1179,"length1":17,"length2":16}]],"length":1214,"saved":false}
{"ts":1366162975702,"patch":[[{"diffs":[[0," 'engine"],[-1,"_o"],[1,"O"],[0,"n'\n     "]],"start1":441,"start2":441,"length1":18,"length2":17},{"diffs":[[0," 'engine"],[-1,"_o"],[1,"O"],[0,"ff'\n    "]],"start1":580,"start2":580,"length1":18,"length2":17},{"diffs":[[0,"gine"],[-1,"_o"],[1,"O"],[0,"ff\"\n"]],"start1":614,"start2":614,"length1":10,"length2":9}]],"length":1211,"saved":false}
{"ts":1366163069640,"patch":[[{"diffs":[[0," {}\n"],[-1,"  device = devices[reading.mobileId] \n  \n"],[0,"  pr"]],"start1":210,"start2":210,"length1":49,"length2":8}]],"length":1170,"saved":false}
{"ts":1366163161045,"patch":[[{"diffs":[[0,"e.state\n"],[1,"  console.log \"prevState: \", prevState\n"],[0,"  newSta"]],"start1":237,"start2":237,"length1":16,"length2":55},{"diffs":[[0,"ntCode)\n"],[1,"  console.log \"newState: \", newState\n"],[0,"  stateC"]],"start1":319,"start2":319,"length1":16,"length2":53},{"diffs":[[0,"ot newState\n"],[1,"  console.log \"stateChanged: \", stateChanged\n"],[0,"  \n  device."]],"start1":396,"start2":396,"length1":24,"length2":69}]],"length":1291,"saved":false}
{"ts":1366163301286,"patch":[[{"diffs":[[0,"nged  = "],[1,"("],[0,"prevStat"]],"start1":374,"start2":374,"length1":16,"length2":17},{"diffs":[[0,"not newState"],[1,")"],[0,"\n  console.l"]],"start1":396,"start2":396,"length1":24,"length2":25}]],"length":1293,"saved":false}
{"ts":1366163335572,"patch":[[{"diffs":[[0,"ate "],[-1,"is not"],[1,"!="],[0," new"]],"start1":389,"start2":389,"length1":14,"length2":10}]],"length":1289,"saved":false}
{"ts":1366163456924,"patch":[[{"diffs":[[0,"ate "],[-1,"!="],[1,"isnt"],[0," new"]],"start1":389,"start2":389,"length1":10,"length2":12}]],"length":1291,"saved":false}
{"ts":1366163479532,"patch":[[{"diffs":[[0,"nged  = "],[-1,"("],[0,"prevStat"]],"start1":374,"start2":374,"length1":17,"length2":16},{"diffs":[[0,"newState"],[-1,")"],[0,"\n  conso"]],"start1":397,"start2":397,"length1":17,"length2":16}]],"length":1289,"saved":false}
{"ts":1366164399544,"patch":[[{"diffs":[[0,"        "],[1,"#"],[0,"updateTi"]],"start1":783,"start2":783,"length1":16,"length2":17},{"diffs":[[0,"        "],[1,"#"],[0,"$gt: dev"]],"start1":808,"start2":808,"length1":16,"length2":17}]],"length":1291,"saved":false}
{"ts":1366164756870,"patch":[[{"diffs":[[0,"    "],[1,"\""],[0,"$sum"],[1,"\""],[0,": 1\n"]],"start1":908,"start2":908,"length1":12,"length2":14}]],"length":1293,"saved":false}
{"ts":1366164883359,"patch":[[{"diffs":[[0,"lts) ->\n        "],[1,"console.log results\n        #"],[0,"historical_trip "]],"start1":940,"start2":940,"length1":32,"length2":61},{"diffs":[[0,"        "],[1,"#"],[0,"start_at"]],"start1":1005,"start2":1005,"length1":16,"length2":17},{"diffs":[[0,"t\n          "],[1,"#"],[0,"device_id : "]],"start1":1043,"start2":1043,"length1":24,"length2":25},{"diffs":[[0,"ileId\n          "],[1,"#"],[0,"\n        results"]],"start1":1079,"start2":1079,"length1":32,"length2":33},{"diffs":[[0,"        "],[1,"#"],[0,"results."]],"start1":1097,"start2":1097,"length1":16,"length2":17},{"diffs":[[0,"t) ->\n          "],[1,"#"],[0,"console.log \"#{e"]],"start1":1128,"start2":1128,"length1":32,"length2":33},{"diffs":[[0,"        "],[1,"#"],[0,"historic"]],"start1":1205,"start2":1205,"length1":16,"length2":17},{"diffs":[[0,".num"],[-1,"\n        \n        \n        console.log historical_trip"]],"start1":1270,"start2":1270,"length1":58,"length2":4}]],"length":1274,"saved":false}
{"ts":1366167167862,"patch":[[{"diffs":[[0,"ice.tripStartAt\n"],[1,"        ,\n"],[0,"        $group:\n"]],"start1":825,"start2":825,"length1":32,"length2":42}]],"length":1284,"saved":false}
{"ts":1366167249138,"patch":[[{"diffs":[[0,"        "],[1,"#"],[0,"$match:\n"]],"start1":728,"start2":728,"length1":16,"length2":17},{"diffs":[[0,"        "],[1,"#"],[0,"mobileId"]],"start1":747,"start2":747,"length1":16,"length2":17},{"diffs":[[0,"        "],[1,"#"],[0,",\n      "]],"start1":843,"start2":843,"length1":16,"length2":17}]],"length":1287,"saved":false}
{"ts":1366167408349,"patch":[[{"diffs":[[0,"evices\n\n"],[1,"  mobileId      = reading.mobileId\n"],[0,"  device"]],"start1":156,"start2":156,"length1":16,"length2":51},{"diffs":[[0,"devices["],[-1,"reading."],[0,"mobileId"]],"start1":217,"start2":217,"length1":24,"length2":16},{"diffs":[[0,"        "],[-1,"#"],[0,"$match:\n"]],"start1":755,"start2":755,"length1":17,"length2":16},{"diffs":[[0,"        "],[-1,"#"],[0,"mobileId"]],"start1":773,"start2":773,"length1":17,"length2":16},{"diffs":[[0,"bileId: "],[-1,"reading."],[0,"mobileId"]],"start1":783,"start2":783,"length1":24,"length2":16},{"diffs":[[0,"        "],[-1,"#"],[0,",\n      "]],"start1":860,"start2":860,"length1":17,"length2":16}]],"length":1303,"saved":false}
{"ts":1366167572266,"patch":[[{"diffs":[[0,"gregate\n"],[1,"        {\n  "],[0,"        "]],"start1":747,"start2":747,"length1":16,"length2":28},{"diffs":[[0,"$match:\n"],[1,"  "],[0,"        "]],"start1":775,"start2":775,"length1":16,"length2":18},{"diffs":[[0,"    "],[1,"}"],[0,",\n"],[1,"        {\n  "],[0,"    "]],"start1":878,"start2":878,"length1":10,"length2":23},{"diffs":[[0,"$group:\n"],[1,"  "],[0,"        "]],"start1":905,"start2":905,"length1":16,"length2":18},{"diffs":[[0,"    "],[1,"  "],[0,"num:\n"],[1,"  "],[0,"    "]],"start1":949,"start2":949,"length1":13,"length2":17},{"diffs":[[0,"sum\": 1\n"],[1,"        }\n"],[0,"      , "]],"start1":976,"start2":976,"length1":16,"length2":26}]],"length":1346,"saved":false}
{"ts":1366167889956,"patch":[[{"diffs":[[0,"gate"],[-1,"\n        {\n          $match:\n           "],[1," {$match: {"],[0," mob"]],"start1":750,"start2":750,"length1":48,"length2":19},{"diffs":[[0,"eId:"],[-1," "],[0,"mobileId"],[-1,"\n          #updateTime:\n            #$gt: device.tripStartAt\n        },\n        {\n          $group:\n           "],[1," }}, {$group: {"],[0," _id:"],[-1," "],[0,"\"$ev"]],"start1":771,"start2":771,"length1":134,"length2":36},{"diffs":[[0,"ode\""],[-1,"\n            num:\n              \"$sum\": 1\n        "],[1,", num: { \"$sum\":1 } }"],[0,"}\n  "]],"start1":811,"start2":811,"length1":58,"length2":29}]],"length":1190,"saved":false}
{"ts":1366168025453,"patch":[[{"diffs":[[0,"regate {"],[1,"\n        "],[0,"$match: "]],"start1":748,"start2":748,"length1":16,"length2":25},{"diffs":[[0,"Id }"],[-1,"}, {"],[1,"\n      }, {\n        "],[0,"$gro"]],"start1":790,"start2":790,"length1":12,"length2":28},{"diffs":[[0,"m\":1 } }"],[-1,"}"],[0,"\n      "],[1,"}"],[0,", (err, "]],"start1":853,"start2":853,"length1":24,"length2":24}]],"length":1215,"saved":false}
{"ts":1366168098586,"patch":[[{"diffs":[[0,"results\n        "],[-1,"#"],[0,"historical_trip "]],"start1":909,"start2":909,"length1":33,"length2":32},{"diffs":[[0,"        "],[-1,"#"],[0,"start_at"]],"start1":945,"start2":945,"length1":17,"length2":16},{"diffs":[[0,"        "],[-1,"#"],[0,"device_i"]],"start1":986,"start2":986,"length1":17,"length2":16},{"diffs":[[0,"ce_id : "],[-1,"reading."],[0,"mobileId"]],"start1":998,"start2":998,"length1":24,"length2":16},{"diffs":[[0,"        "],[-1,"#"],[0,"\n       "]],"start1":1017,"start2":1017,"length1":17,"length2":16},{"diffs":[[0,"        "],[-1,"#"],[0,"results."]],"start1":1026,"start2":1026,"length1":17,"length2":16},{"diffs":[[0,"        "],[-1,"#"],[0,"console."]],"start1":1064,"start2":1064,"length1":17,"length2":16},{"diffs":[[0,"        "],[-1,"#"],[0,"historic"]],"start1":1132,"start2":1132,"length1":17,"length2":16},{"diffs":[[0,"m\"] = result.num"],[1,"\n        \n        console.log historical_trip"]],"start1":1184,"start2":1184,"length1":16,"length2":61}]],"length":1245,"saved":false}
{"ts":1366168161098,"patch":[[{"diffs":[[0,"entCodes[result."],[1,"_"],[0,"id]}_num = \", re"]],"start1":1089,"start2":1089,"length1":32,"length2":33},{"diffs":[[0,"[result."],[1,"_"],[0,"id]}_num"]],"start1":1170,"start2":1170,"length1":16,"length2":17}]],"length":1247,"saved":false}
{"ts":1366168285234,"patch":[[{"diffs":[[0,"mobileId"],[1,", updateTime: { \"$gt\":reading.updateTime }"],[0," }\n     "]],"start1":784,"start2":784,"length1":16,"length2":58}]],"length":1289,"saved":false}
{"ts":1366168306432,"patch":[[{"diffs":[[0,"{ \"$gt\":"],[-1,"reading.updateTime"],[1,"device.tripStartAt"],[0," } }\n   "]],"start1":806,"start2":806,"length1":34,"length2":34}]],"length":1289,"saved":false}
{"ts":1366168493167,"patch":[[{"diffs":[[0,": { "],[-1,"\""],[0,"$gt"],[-1,"\""],[0,":dev"]],"start1":804,"start2":804,"length1":13,"length2":11}]],"length":1287,"saved":false}
{"ts":1366168525148,"patch":[[{"diffs":[[0,": { $gt:"],[-1,"device.tripStartAt"],[1,"new Date('Mon, 15 Apr 2013 13:00:00 GMT')"],[0," } }\n   "]],"start1":804,"start2":804,"length1":34,"length2":57}]],"length":1310,"saved":false}
{"ts":1366169358889,"patch":[[{"diffs":[[0,"$gt:"],[-1,"new Date('Mon, 15 Apr 2013 13:00:00 GMT')"],[1,"reading.updateTime"],[0," } }"]],"start1":808,"start2":808,"length1":49,"length2":26}]],"length":1287,"saved":false}
{"ts":1366169396512,"patch":[[{"diffs":[[0,": { $gt:"],[-1,"reading.updateTime"],[1,"device.tripStartAt"],[0," } }\n   "]],"start1":804,"start2":804,"length1":34,"length2":34}]],"length":1287,"saved":false}
{"ts":1366170288161,"patch":[[{"diffs":[[0,"\n\n  "],[-1,"console.log \"devices: \", devices\n\n  "],[0,""],[1,""],[0,"mobi"]],"start1":126,"start2":126,"length1":44,"length2":8},{"diffs":[[0,"ate\n"],[-1,"  console.log \"prevState: \", prevState\n"],[0,"  ne"]],"start1":232,"start2":232,"length1":47,"length2":8},{"diffs":[[0,"de)\n"],[-1,"  console.log \"newState: \", newState\n"],[0,"  st"]],"start1":275,"start2":275,"length1":45,"length2":8},{"diffs":[[0,"tate"],[-1,"\n  console.log \"stateChanged: \", stateChanged\n "],[0," \n  "]],"start1":316,"start2":316,"length1":55,"length2":8},{"diffs":[[0,"e.state "],[1," "],[0,"= newSta"]],"start1":329,"start2":329,"length1":16,"length2":17},{"diffs":[[0,"Changed\n"],[1,"  \n"],[0,"    if n"]],"start1":362,"start2":362,"length1":16,"length2":19},{"diffs":[[0,"'\n      "],[-1,"console.log \""],[0,"device.t"]],"start1":401,"start2":401,"length1":29,"length2":16},{"diffs":[[0,"artAt = "],[-1,"#{"],[0,"reading."]],"start1":422,"start2":422,"length1":18,"length2":16},{"diffs":[[0,"Time"],[-1,"}\""],[0,"\n      "],[-1,"device.tripStartAt = reading.updateTime"],[0,"\n   "]],"start1":444,"start2":444,"length1":56,"length2":15},{"diffs":[[0,"Off'"],[-1,"\n      console.log \"engineOff\""],[1," and device.tripStartAt"],[0,"\n   "]],"start1":482,"start2":482,"length1":38,"length2":31},{"diffs":[[0," ->\n"],[-1,"        console.log results\n"],[0,"    "]],"start1":707,"start2":707,"length1":36,"length2":8},{"diffs":[[0,") ->"],[-1,"\n          console.log \"#{eventCodes[result._id]}_num = \", result.num"],[0,""],[1,""],[0,"\n   "]],"start1":851,"start2":851,"length1":77,"length2":8}]],"length":972,"saved":false}
{"ts":1366181958048,"patch":[[{"diffs":[[0,"obileId\n"],[1,"          end_at    : reading.updateTime\n"],[0,"        "]],"start1":801,"start2":801,"length1":16,"length2":57}]],"length":1013,"saved":false}
{"ts":1366182079661,"patch":[[{"diffs":[[0,".updateTime\n"],[1,"          duration  : reading.updateTime - device.tripStartAt\n"],[0,"          \n "]],"start1":838,"start2":838,"length1":24,"length2":86}]],"length":1075,"saved":false}
{"ts":1366182141114,"patch":[[{"diffs":[[0,"l_trip[\""],[1,"num_"],[0,"#{eventC"]],"start1":978,"start2":978,"length1":16,"length2":20},{"diffs":[[0,"id]}"],[-1,"_num"],[0,"\"] ="]],"start1":1011,"start2":1011,"length1":12,"length2":8}]],"length":1075,"saved":false}
